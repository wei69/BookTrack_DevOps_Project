function cov_12pq25nvwn(){var path="C:\\Users\\wei long\\Documents\\devoppart2\\BookTrack_DevOps_Project\\public\\js\\update-book.js";var hash="c706a4b553b412fcc809b1c7a13b959b77203b1b";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\wei long\\Documents\\devoppart2\\BookTrack_DevOps_Project\\public\\js\\update-book.js",statementMap:{"0":{start:{line:3,column:4},end:{line:3,column:67}},"1":{start:{line:4,column:4},end:{line:4,column:72}},"2":{start:{line:9,column:21},end:{line:9,column:63}},"3":{start:{line:10,column:18},end:{line:10,column:39}},"4":{start:{line:12,column:4},end:{line:12,column:79}},"5":{start:{line:12,column:31},end:{line:12,column:77}},"6":{start:{line:18,column:4},end:{line:18,column:34}},"7":{start:{line:21,column:4},end:{line:45,column:5}},"8":{start:{line:22,column:18},end:{line:22,column:19}},"9":{start:{line:23,column:8},end:{line:26,column:9}},"10":{start:{line:23,column:21},end:{line:23,column:22}},"11":{start:{line:24,column:12},end:{line:24,column:61}},"12":{start:{line:24,column:48},end:{line:24,column:61}},"13":{start:{line:25,column:12},end:{line:25,column:51}},"14":{start:{line:28,column:23},end:{line:28,column:30}},"15":{start:{line:29,column:8},end:{line:35,column:9}},"16":{start:{line:30,column:12},end:{line:30,column:27}},"17":{start:{line:31,column:15},end:{line:35,column:9}},"18":{start:{line:32,column:12},end:{line:32,column:47}},"19":{start:{line:34,column:12},end:{line:34,column:25}},"20":{start:{line:36,column:8},end:{line:36,column:30}},"21":{start:{line:37,column:11},end:{line:45,column:5}},"22":{start:{line:38,column:18},end:{line:38,column:19}},"23":{start:{line:39,column:8},end:{line:43,column:9}},"24":{start:{line:39,column:21},end:{line:39,column:22}},"25":{start:{line:40,column:26},end:{line:40,column:47}},"26":{start:{line:41,column:12},end:{line:41,column:43}},"27":{start:{line:41,column:30},end:{line:41,column:43}},"28":{start:{line:42,column:12},end:{line:42,column:51}},"29":{start:{line:44,column:8},end:{line:44,column:30}},"30":{start:{line:46,column:4},end:{line:46,column:17}},"31":{start:{line:51,column:4},end:{line:54,column:5}},"32":{start:{line:52,column:8},end:{line:52,column:34}},"33":{start:{line:53,column:8},end:{line:53,column:15}},"34":{start:{line:56,column:4},end:{line:90,column:5}},"35":{start:{line:58,column:25},end:{line:58,column:77}},"36":{start:{line:60,column:8},end:{line:86,column:9}},"37":{start:{line:61,column:25},end:{line:61,column:46}},"38":{start:{line:64,column:12},end:{line:64,column:68}},"39":{start:{line:65,column:12},end:{line:65,column:70}},"40":{start:{line:66,column:12},end:{line:66,column:66}},"41":{start:{line:67,column:12},end:{line:67,column:68}},"42":{start:{line:68,column:12},end:{line:68,column:79}},"43":{start:{line:69,column:12},end:{line:69,column:67}},"44":{start:{line:70,column:12},end:{line:70,column:60}},"45":{start:{line:73,column:33},end:{line:73,column:80}},"46":{start:{line:74,column:12},end:{line:79,column:13}},"47":{start:{line:75,column:16},end:{line:75,column:74}},"48":{start:{line:76,column:16},end:{line:76,column:53}},"49":{start:{line:78,column:16},end:{line:78,column:52}},"50":{start:{line:82,column:12},end:{line:82,column:81}},"51":{start:{line:83,column:12},end:{line:83,column:76}},"52":{start:{line:85,column:12},end:{line:85,column:63}},"53":{start:{line:88,column:8},end:{line:88,column:65}},"54":{start:{line:89,column:8},end:{line:89,column:68}},"55":{start:{line:94,column:0},end:{line:115,column:3}},"56":{start:{line:95,column:17},end:{line:95,column:38}},"57":{start:{line:98,column:4},end:{line:114,column:5}},"58":{start:{line:100,column:8},end:{line:104,column:9}},"59":{start:{line:101,column:12},end:{line:101,column:86}},"60":{start:{line:102,column:12},end:{line:102,column:36}},"61":{start:{line:103,column:12},end:{line:103,column:19}},"62":{start:{line:107,column:23},end:{line:107,column:39}},"63":{start:{line:108,column:8},end:{line:112,column:10}},"64":{start:{line:109,column:33},end:{line:109,column:80}},"65":{start:{line:110,column:12},end:{line:110,column:47}},"66":{start:{line:111,column:12},end:{line:111,column:49}},"67":{start:{line:113,column:8},end:{line:113,column:35}},"68":{start:{line:118,column:0},end:{line:172,column:3}},"69":{start:{line:119,column:4},end:{line:119,column:27}},"70":{start:{line:121,column:17},end:{line:121,column:35}},"71":{start:{line:122,column:19},end:{line:122,column:62}},"72":{start:{line:123,column:18},end:{line:123,column:67}},"73":{start:{line:124,column:19},end:{line:124,column:69}},"74":{start:{line:125,column:17},end:{line:125,column:58}},"75":{start:{line:128,column:4},end:{line:131,column:5}},"76":{start:{line:129,column:8},end:{line:129,column:56}},"77":{start:{line:130,column:8},end:{line:130,column:15}},"78":{start:{line:133,column:4},end:{line:136,column:5}},"79":{start:{line:134,column:8},end:{line:134,column:62}},"80":{start:{line:135,column:8},end:{line:135,column:15}},"81":{start:{line:138,column:4},end:{line:141,column:5}},"82":{start:{line:139,column:8},end:{line:139,column:72}},"83":{start:{line:140,column:8},end:{line:140,column:15}},"84":{start:{line:144,column:26},end:{line:144,column:60}},"85":{start:{line:145,column:4},end:{line:148,column:5}},"86":{start:{line:146,column:8},end:{line:146,column:72}},"87":{start:{line:147,column:8},end:{line:147,column:15}},"88":{start:{line:150,column:24},end:{line:150,column:84}},"89":{start:{line:151,column:4},end:{line:153,column:5}},"90":{start:{line:152,column:8},end:{line:152,column:15}},"91":{start:{line:155,column:4},end:{line:171,column:5}},"92":{start:{line:156,column:25},end:{line:159,column:10}},"93":{start:{line:161,column:8},end:{line:167,column:9}},"94":{start:{line:162,column:12},end:{line:162,column:48}},"95":{start:{line:163,column:12},end:{line:163,column:24}},"96":{start:{line:164,column:12},end:{line:164,column:23}},"97":{start:{line:166,column:12},end:{line:166,column:68}},"98":{start:{line:169,column:8},end:{line:169,column:53}},"99":{start:{line:170,column:8},end:{line:170,column:98}},"100":{start:{line:177,column:4},end:{line:180,column:5}},"101":{start:{line:178,column:8},end:{line:178,column:61}},"102":{start:{line:179,column:8},end:{line:179,column:15}},"103":{start:{line:182,column:20},end:{line:182,column:40}},"104":{start:{line:184,column:4},end:{line:184,column:71}},"105":{start:{line:187,column:4},end:{line:209,column:6}},"106":{start:{line:189,column:8},end:{line:208,column:9}},"107":{start:{line:191,column:25},end:{line:191,column:57}},"108":{start:{line:192,column:12},end:{line:192,column:37}},"109":{start:{line:195,column:13},end:{line:208,column:9}},"110":{start:{line:196,column:12},end:{line:196,column:80}},"111":{start:{line:197,column:12},end:{line:197,column:73}},"112":{start:{line:200,column:13},end:{line:208,column:9}},"113":{start:{line:201,column:12},end:{line:201,column:63}},"114":{start:{line:202,column:12},end:{line:202,column:65}},"115":{start:{line:206,column:12},end:{line:206,column:78}},"116":{start:{line:207,column:12},end:{line:207,column:71}},"117":{start:{line:212,column:4},end:{line:216,column:6}},"118":{start:{line:214,column:8},end:{line:214,column:59}},"119":{start:{line:215,column:8},end:{line:215,column:98}},"120":{start:{line:219,column:4},end:{line:219,column:19}}},fnMap:{"0":{name:"closeForm",decl:{start:{line:2,column:9},end:{line:2,column:18}},loc:{start:{line:2,column:21},end:{line:5,column:1}},line:2},"1":{name:"isTitleUnique",decl:{start:{line:8,column:15},end:{line:8,column:28}},loc:{start:{line:8,column:47},end:{line:13,column:1}},line:8},"2":{name:"(anonymous_2)",decl:{start:{line:12,column:23},end:{line:12,column:24}},loc:{start:{line:12,column:31},end:{line:12,column:77}},line:12},"3":{name:"isValidISBN",decl:{start:{line:16,column:9},end:{line:16,column:20}},loc:{start:{line:16,column:27},end:{line:47,column:1}},line:16},"4":{name:"editBook",decl:{start:{line:50,column:15},end:{line:50,column:23}},loc:{start:{line:50,column:32},end:{line:91,column:1}},line:50},"5":{name:"(anonymous_5)",decl:{start:{line:94,column:64},end:{line:94,column:65}},loc:{start:{line:94,column:81},end:{line:115,column:1}},line:94},"6":{name:"(anonymous_6)",decl:{start:{line:108,column:24},end:{line:108,column:25}},loc:{start:{line:108,column:37},end:{line:112,column:9}},line:108},"7":{name:"(anonymous_7)",decl:{start:{line:118,column:67},end:{line:118,column:68}},loc:{start:{line:118,column:90},end:{line:172,column:1}},line:118},"8":{name:"getBookById",decl:{start:{line:175,column:9},end:{line:175,column:20}},loc:{start:{line:175,column:29},end:{line:220,column:1}},line:175},"9":{name:"(anonymous_9)",decl:{start:{line:187,column:21},end:{line:187,column:22}},loc:{start:{line:187,column:33},end:{line:209,column:5}},line:187},"10":{name:"(anonymous_10)",decl:{start:{line:212,column:22},end:{line:212,column:23}},loc:{start:{line:212,column:34},end:{line:216,column:5}},line:212}},branchMap:{"0":{loc:{start:{line:12,column:31},end:{line:12,column:77}},type:"binary-expr",locations:[{start:{line:12,column:31},end:{line:12,column:54}},{start:{line:12,column:58},end:{line:12,column:77}}],line:12},"1":{loc:{start:{line:21,column:4},end:{line:45,column:5}},type:"if",locations:[{start:{line:21,column:4},end:{line:45,column:5}},{start:{line:37,column:11},end:{line:45,column:5}}],line:21},"2":{loc:{start:{line:24,column:12},end:{line:24,column:61}},type:"if",locations:[{start:{line:24,column:12},end:{line:24,column:61}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:24},"3":{loc:{start:{line:24,column:16},end:{line:24,column:46}},type:"binary-expr",locations:[{start:{line:24,column:16},end:{line:24,column:29}},{start:{line:24,column:33},end:{line:24,column:46}}],line:24},"4":{loc:{start:{line:29,column:8},end:{line:35,column:9}},type:"if",locations:[{start:{line:29,column:8},end:{line:35,column:9}},{start:{line:31,column:15},end:{line:35,column:9}}],line:29},"5":{loc:{start:{line:31,column:15},end:{line:35,column:9}},type:"if",locations:[{start:{line:31,column:15},end:{line:35,column:9}},{start:{line:33,column:15},end:{line:35,column:9}}],line:31},"6":{loc:{start:{line:31,column:19},end:{line:31,column:53}},type:"binary-expr",locations:[{start:{line:31,column:19},end:{line:31,column:34}},{start:{line:31,column:38},end:{line:31,column:53}}],line:31},"7":{loc:{start:{line:37,column:11},end:{line:45,column:5}},type:"if",locations:[{start:{line:37,column:11},end:{line:45,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:37},"8":{loc:{start:{line:41,column:12},end:{line:41,column:43}},type:"if",locations:[{start:{line:41,column:12},end:{line:41,column:43}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:41},"9":{loc:{start:{line:42,column:19},end:{line:42,column:50}},type:"cond-expr",locations:[{start:{line:42,column:33},end:{line:42,column:38}},{start:{line:42,column:41},end:{line:42,column:50}}],line:42},"10":{loc:{start:{line:51,column:4},end:{line:54,column:5}},type:"if",locations:[{start:{line:51,column:4},end:{line:54,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:51},"11":{loc:{start:{line:60,column:8},end:{line:86,column:9}},type:"if",locations:[{start:{line:60,column:8},end:{line:86,column:9}},{start:{line:84,column:15},end:{line:86,column:9}}],line:60},"12":{loc:{start:{line:74,column:12},end:{line:79,column:13}},type:"if",locations:[{start:{line:74,column:12},end:{line:79,column:13}},{start:{line:77,column:19},end:{line:79,column:13}}],line:74},"13":{loc:{start:{line:98,column:4},end:{line:114,column:5}},type:"if",locations:[{start:{line:98,column:4},end:{line:114,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:98},"14":{loc:{start:{line:100,column:8},end:{line:104,column:9}},type:"if",locations:[{start:{line:100,column:8},end:{line:104,column:9}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:100},"15":{loc:{start:{line:128,column:4},end:{line:131,column:5}},type:"if",locations:[{start:{line:128,column:4},end:{line:131,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:128},"16":{loc:{start:{line:133,column:4},end:{line:136,column:5}},type:"if",locations:[{start:{line:133,column:4},end:{line:136,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:133},"17":{loc:{start:{line:138,column:4},end:{line:141,column:5}},type:"if",locations:[{start:{line:138,column:4},end:{line:141,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:138},"18":{loc:{start:{line:145,column:4},end:{line:148,column:5}},type:"if",locations:[{start:{line:145,column:4},end:{line:148,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:145},"19":{loc:{start:{line:151,column:4},end:{line:153,column:5}},type:"if",locations:[{start:{line:151,column:4},end:{line:153,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:151},"20":{loc:{start:{line:161,column:8},end:{line:167,column:9}},type:"if",locations:[{start:{line:161,column:8},end:{line:167,column:9}},{start:{line:165,column:15},end:{line:167,column:9}}],line:161},"21":{loc:{start:{line:177,column:4},end:{line:180,column:5}},type:"if",locations:[{start:{line:177,column:4},end:{line:180,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:177},"22":{loc:{start:{line:177,column:8},end:{line:177,column:69}},type:"binary-expr",locations:[{start:{line:177,column:8},end:{line:177,column:15}},{start:{line:177,column:19},end:{line:177,column:45}},{start:{line:177,column:49},end:{line:177,column:69}}],line:177},"23":{loc:{start:{line:189,column:8},end:{line:208,column:9}},type:"if",locations:[{start:{line:189,column:8},end:{line:208,column:9}},{start:{line:195,column:13},end:{line:208,column:9}}],line:189},"24":{loc:{start:{line:189,column:12},end:{line:189,column:57}},type:"binary-expr",locations:[{start:{line:189,column:12},end:{line:189,column:33}},{start:{line:189,column:37},end:{line:189,column:57}}],line:189},"25":{loc:{start:{line:195,column:13},end:{line:208,column:9}},type:"if",locations:[{start:{line:195,column:13},end:{line:208,column:9}},{start:{line:200,column:13},end:{line:208,column:9}}],line:195},"26":{loc:{start:{line:200,column:13},end:{line:208,column:9}},type:"if",locations:[{start:{line:200,column:13},end:{line:208,column:9}},{start:{line:205,column:13},end:{line:208,column:9}}],line:200}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":0,"59":0,"60":0,"61":0,"62":0,"63":0,"64":0,"65":0,"66":0,"67":0,"68":0,"69":0,"70":0,"71":0,"72":0,"73":0,"74":0,"75":0,"76":0,"77":0,"78":0,"79":0,"80":0,"81":0,"82":0,"83":0,"84":0,"85":0,"86":0,"87":0,"88":0,"89":0,"90":0,"91":0,"92":0,"93":0,"94":0,"95":0,"96":0,"97":0,"98":0,"99":0,"100":0,"101":0,"102":0,"103":0,"104":0,"105":0,"106":0,"107":0,"108":0,"109":0,"110":0,"111":0,"112":0,"113":0,"114":0,"115":0,"116":0,"117":0,"118":0,"119":0,"120":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0],"19":[0,0],"20":[0,0],"21":[0,0],"22":[0,0,0],"23":[0,0],"24":[0,0],"25":[0,0],"26":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"c706a4b553b412fcc809b1c7a13b959b77203b1b"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_12pq25nvwn=function(){return actualCoverage;};}return actualCoverage;}cov_12pq25nvwn();// General function to close whichever form is open
function closeForm(){cov_12pq25nvwn().f[0]++;cov_12pq25nvwn().s[0]++;document.getElementById('edit-overlay').style.display='none';cov_12pq25nvwn().s[1]++;document.getElementById('editFormContainer').style.display='none';}// Function to check if a title already exists, ignoring the current book
async function isTitleUnique(newTitle,bookId){cov_12pq25nvwn().f[1]++;const response=(cov_12pq25nvwn().s[2]++,await fetch(`http://localhost:5500/books`));const books=(cov_12pq25nvwn().s[3]++,await response.json());cov_12pq25nvwn().s[4]++;return books.every(book=>{cov_12pq25nvwn().f[2]++;cov_12pq25nvwn().s[5]++;return(cov_12pq25nvwn().b[0][0]++,book.title!==newTitle)||(cov_12pq25nvwn().b[0][1]++,book._id===bookId);});}// Function to validate ISBN
function isValidISBN(isbn){cov_12pq25nvwn().f[3]++;cov_12pq25nvwn().s[6]++;// Remove any hyphens
isbn=isbn.replace(/-/g,'');// Check if the ISBN is 10 or 13 characters long
cov_12pq25nvwn().s[7]++;if(isbn.length===10){cov_12pq25nvwn().b[1][0]++;let sum=(cov_12pq25nvwn().s[8]++,0);cov_12pq25nvwn().s[9]++;for(let i=(cov_12pq25nvwn().s[10]++,0);i<9;i++){cov_12pq25nvwn().s[11]++;if((cov_12pq25nvwn().b[3][0]++,isbn[i]<'0')||(cov_12pq25nvwn().b[3][1]++,isbn[i]>'9')){cov_12pq25nvwn().b[2][0]++;cov_12pq25nvwn().s[12]++;return false;}else{cov_12pq25nvwn().b[2][1]++;}// Ensure all characters are digits
cov_12pq25nvwn().s[13]++;sum+=(i+1)*parseInt(isbn[i],10);}let checksum=(cov_12pq25nvwn().s[14]++,isbn[9]);cov_12pq25nvwn().s[15]++;if(checksum==='X'){cov_12pq25nvwn().b[4][0]++;cov_12pq25nvwn().s[16]++;sum+=10*10;}else{cov_12pq25nvwn().b[4][1]++;cov_12pq25nvwn().s[17]++;if((cov_12pq25nvwn().b[6][0]++,checksum>='0')&&(cov_12pq25nvwn().b[6][1]++,checksum<='9')){cov_12pq25nvwn().b[5][0]++;cov_12pq25nvwn().s[18]++;sum+=10*parseInt(checksum,10);//calculates the weighted sum for each digit by multiplying the digit's position
}else{cov_12pq25nvwn().b[5][1]++;cov_12pq25nvwn().s[19]++;return false;}}cov_12pq25nvwn().s[20]++;return sum%11===0;}else{cov_12pq25nvwn().b[1][1]++;cov_12pq25nvwn().s[21]++;if(isbn.length===13){cov_12pq25nvwn().b[7][0]++;let sum=(cov_12pq25nvwn().s[22]++,0);cov_12pq25nvwn().s[23]++;for(let i=(cov_12pq25nvwn().s[24]++,0);i<13;i++){const digit=(cov_12pq25nvwn().s[25]++,parseInt(isbn[i],10));cov_12pq25nvwn().s[26]++;if(isNaN(digit)){cov_12pq25nvwn().b[8][0]++;cov_12pq25nvwn().s[27]++;return false;}else{cov_12pq25nvwn().b[8][1]++;}// Ensure all characters are digits
cov_12pq25nvwn().s[28]++;sum+=i%2===0?(cov_12pq25nvwn().b[9][0]++,digit):(cov_12pq25nvwn().b[9][1]++,digit*3);}cov_12pq25nvwn().s[29]++;return sum%10===0;}else{cov_12pq25nvwn().b[7][1]++;}}cov_12pq25nvwn().s[30]++;return false;}// Function to open the update form with current book details
async function editBook(bookId){cov_12pq25nvwn().f[4]++;cov_12pq25nvwn().s[31]++;if(!bookId){cov_12pq25nvwn().b[10][0]++;cov_12pq25nvwn().s[32]++;alert('Invalid book ID.');cov_12pq25nvwn().s[33]++;return;}else{cov_12pq25nvwn().b[10][1]++;}cov_12pq25nvwn().s[34]++;try{// Fetch the book details from the server using the book ID
const response=(cov_12pq25nvwn().s[35]++,await fetch(`http://localhost:5500/books/${bookId}`));cov_12pq25nvwn().s[36]++;if(response.ok){cov_12pq25nvwn().b[11][0]++;const book=(cov_12pq25nvwn().s[37]++,await response.json());// Set the form fields with current book details
cov_12pq25nvwn().s[38]++;document.getElementById('editTitle').value=book.title;cov_12pq25nvwn().s[39]++;document.getElementById('editAuthor').value=book.author;cov_12pq25nvwn().s[40]++;document.getElementById('editIsbn').value=book.isbn;cov_12pq25nvwn().s[41]++;document.getElementById('editGenre').value=book.genre;cov_12pq25nvwn().s[42]++;document.getElementById('editCopies').value=book.availableCopies;cov_12pq25nvwn().s[43]++;document.getElementById('editBookId').value=book._id;cov_12pq25nvwn().s[44]++;document.getElementById('editImage').value='';// Reset image input
// Set the image preview element if there's an existing image
const imageElement=(cov_12pq25nvwn().s[45]++,document.getElementById('editBookPreviewImage'));cov_12pq25nvwn().s[46]++;if(book.image){cov_12pq25nvwn().b[12][0]++;cov_12pq25nvwn().s[47]++;imageElement.src=`data:image/jpeg;base64,${book.image}`;cov_12pq25nvwn().s[48]++;imageElement.style.display='block';// Show the image if it exists
}else{cov_12pq25nvwn().b[12][1]++;cov_12pq25nvwn().s[49]++;imageElement.style.display='none';// Hide the image if not available
}// Display the form
cov_12pq25nvwn().s[50]++;document.getElementById('editFormContainer').style.display='block';cov_12pq25nvwn().s[51]++;document.getElementById('edit-overlay').style.display='block';}else{cov_12pq25nvwn().b[11][1]++;cov_12pq25nvwn().s[52]++;alert('Failed to fetch book details for editing.');}}catch(error){cov_12pq25nvwn().s[53]++;console.error('Error fetching book for editing:',error);cov_12pq25nvwn().s[54]++;alert('An error occurred while fetching the book details.');}}// Event listener to handle image preview when a new image is selected
cov_12pq25nvwn().s[55]++;document.getElementById('editImage').addEventListener('change',function(event){cov_12pq25nvwn().f[5]++;const file=(cov_12pq25nvwn().s[56]++,event.target.files[0]);// Check if an image file is selected
cov_12pq25nvwn().s[57]++;if(file){cov_12pq25nvwn().b[13][0]++;cov_12pq25nvwn().s[58]++;// Check if file size exceeds 16MB (16 * 1024 * 1024 bytes)
if(file.size>16*1024*1024){cov_12pq25nvwn().b[14][0]++;cov_12pq25nvwn().s[59]++;alert('Image size should not exceed 16MB. Please select a smaller file.');cov_12pq25nvwn().s[60]++;event.target.value='';// Clear the file input
cov_12pq25nvwn().s[61]++;return;}else{cov_12pq25nvwn().b[14][1]++;}// Proceed with displaying the image preview if the size is valid
const reader=(cov_12pq25nvwn().s[62]++,new FileReader());cov_12pq25nvwn().s[63]++;reader.onload=function(e){cov_12pq25nvwn().f[6]++;const imageElement=(cov_12pq25nvwn().s[64]++,document.getElementById('editBookPreviewImage'));cov_12pq25nvwn().s[65]++;imageElement.src=e.target.result;cov_12pq25nvwn().s[66]++;imageElement.style.display='block';// Show the preview
};cov_12pq25nvwn().s[67]++;reader.readAsDataURL(file);}else{cov_12pq25nvwn().b[13][1]++;}});// Function to handle update form submission
cov_12pq25nvwn().s[68]++;document.getElementById('editBookForm').addEventListener('submit',async function(event){cov_12pq25nvwn().f[7]++;cov_12pq25nvwn().s[69]++;event.preventDefault();// Prevent default form submission
const form=(cov_12pq25nvwn().s[70]++,new FormData(this));const bookId=(cov_12pq25nvwn().s[71]++,document.getElementById('editBookId').value);const title=(cov_12pq25nvwn().s[72]++,document.getElementById('editTitle').value.trim());const author=(cov_12pq25nvwn().s[73]++,document.getElementById('editAuthor').value.trim());const isbn=(cov_12pq25nvwn().s[74]++,document.getElementById('editIsbn').value);// Title and Author length validation
cov_12pq25nvwn().s[75]++;if(title.length>100){cov_12pq25nvwn().b[15][0]++;cov_12pq25nvwn().s[76]++;alert('Title must be 100 characters or fewer.');cov_12pq25nvwn().s[77]++;return;}else{cov_12pq25nvwn().b[15][1]++;}cov_12pq25nvwn().s[78]++;if(author.length>150){cov_12pq25nvwn().b[16][0]++;cov_12pq25nvwn().s[79]++;alert('Author name must be 150 characters or fewer.');cov_12pq25nvwn().s[80]++;return;}else{cov_12pq25nvwn().b[16][1]++;}cov_12pq25nvwn().s[81]++;if(!isValidISBN(isbn)){cov_12pq25nvwn().b[17][0]++;cov_12pq25nvwn().s[82]++;alert('Invalid ISBN. Please enter a valid ISBN-10 or ISBN-13.');cov_12pq25nvwn().s[83]++;return;}else{cov_12pq25nvwn().b[17][1]++;}// Check if title is unique (ignoring the current book's own title)
const isUniqueTitle=(cov_12pq25nvwn().s[84]++,await isTitleUnique(title,bookId));cov_12pq25nvwn().s[85]++;if(!isUniqueTitle){cov_12pq25nvwn().b[18][0]++;cov_12pq25nvwn().s[86]++;alert('Title already exists. Please choose a different title.');cov_12pq25nvwn().s[87]++;return;}else{cov_12pq25nvwn().b[18][1]++;}const isConfirmed=(cov_12pq25nvwn().s[88]++,confirm("Are you sure you want to update the book details?"));cov_12pq25nvwn().s[89]++;if(!isConfirmed){cov_12pq25nvwn().b[19][0]++;cov_12pq25nvwn().s[90]++;return;// Exit function if user does not confirm
}else{cov_12pq25nvwn().b[19][1]++;}cov_12pq25nvwn().s[91]++;try{const response=(cov_12pq25nvwn().s[92]++,await fetch(`http://localhost:5500/updateBook/${bookId}`,{method:'PUT',body:form}));cov_12pq25nvwn().s[93]++;if(response.ok){cov_12pq25nvwn().b[20][0]++;cov_12pq25nvwn().s[94]++;alert('Book updated successfully!');cov_12pq25nvwn().s[95]++;closeForm();// Close the edit form
cov_12pq25nvwn().s[96]++;getBooks();// Refresh the book list
}else{cov_12pq25nvwn().b[20][1]++;cov_12pq25nvwn().s[97]++;alert('Failed to update book. Please try again later.');}}catch(error){cov_12pq25nvwn().s[98]++;console.error('Error updating book:',error);cov_12pq25nvwn().s[99]++;alert('An error occurred while updating the book. Please check the console for details.');}});// Function to fetch a book by ID
function getBookById(bookId){cov_12pq25nvwn().f[8]++;cov_12pq25nvwn().s[100]++;// Validate the provided book ID
if((cov_12pq25nvwn().b[22][0]++,!bookId)||(cov_12pq25nvwn().b[22][1]++,typeof bookId!=='string')||(cov_12pq25nvwn().b[22][2]++,bookId.trim()==='')){cov_12pq25nvwn().b[21][0]++;cov_12pq25nvwn().s[101]++;alert('Invalid book ID. Please provide a valid ID.');cov_12pq25nvwn().s[102]++;return;// Exit function if the book ID is invalid
}else{cov_12pq25nvwn().b[21][1]++;}const request=(cov_12pq25nvwn().s[103]++,new XMLHttpRequest());// Open a GET request to fetch a specific book by its ID, using template literals in the URL
cov_12pq25nvwn().s[104]++;request.open('GET',`http://localhost:5500/books/${bookId}`,true);// Define the onload event handler for the request
cov_12pq25nvwn().s[105]++;request.onload=function(){cov_12pq25nvwn().f[9]++;cov_12pq25nvwn().s[106]++;// Check if the request was successful (status code between 200 and 299)
if((cov_12pq25nvwn().b[24][0]++,request.status>=200)&&(cov_12pq25nvwn().b[24][1]++,request.status<300)){cov_12pq25nvwn().b[23][0]++;// Parse the JSON response to get the book object
const book=(cov_12pq25nvwn().s[107]++,JSON.parse(request.responseText));cov_12pq25nvwn().s[108]++;displayBookDetails(book);// Call displayBookDetails to render the book details
}// If the status is 400, alert about invalid book ID format
else{cov_12pq25nvwn().b[23][1]++;cov_12pq25nvwn().s[109]++;if(request.status===400){cov_12pq25nvwn().b[25][0]++;cov_12pq25nvwn().s[110]++;alert('Invalid book ID format. Please check the ID and try again.');cov_12pq25nvwn().s[111]++;console.error('Invalid book ID format:',request.statusText);}// If the status is 404, alert that the book was not found
else{cov_12pq25nvwn().b[25][1]++;cov_12pq25nvwn().s[112]++;if(request.status===404){cov_12pq25nvwn().b[26][0]++;cov_12pq25nvwn().s[113]++;alert('Book not found. It may have been removed.');cov_12pq25nvwn().s[114]++;console.error('Book not found:',request.statusText);}// Handle other unsuccessful status codes by alerting the user
else{cov_12pq25nvwn().b[26][1]++;cov_12pq25nvwn().s[115]++;alert('Failed to retrieve book details. Please try again later.');cov_12pq25nvwn().s[116]++;console.error('Failed to fetch book:',request.statusText);}}}};// Define the onerror event handler for network errors
cov_12pq25nvwn().s[117]++;request.onerror=function(){cov_12pq25nvwn().f[10]++;cov_12pq25nvwn().s[118]++;// Log a network error and alert the user
console.error('Network error while fetching book');cov_12pq25nvwn().s[119]++;alert('An error occurred while fetching the book. Please check the console for details.');};// Send the request to the server
cov_12pq25nvwn().s[120]++;request.send();}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTJwcTI1bnZ3biIsImFjdHVhbENvdmVyYWdlIiwiY2xvc2VGb3JtIiwiZiIsInMiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwic3R5bGUiLCJkaXNwbGF5IiwiaXNUaXRsZVVuaXF1ZSIsIm5ld1RpdGxlIiwiYm9va0lkIiwicmVzcG9uc2UiLCJmZXRjaCIsImJvb2tzIiwianNvbiIsImV2ZXJ5IiwiYm9vayIsImIiLCJ0aXRsZSIsIl9pZCIsImlzVmFsaWRJU0JOIiwiaXNibiIsInJlcGxhY2UiLCJsZW5ndGgiLCJzdW0iLCJpIiwicGFyc2VJbnQiLCJjaGVja3N1bSIsImRpZ2l0IiwiaXNOYU4iLCJlZGl0Qm9vayIsImFsZXJ0Iiwib2siLCJ2YWx1ZSIsImF1dGhvciIsImdlbnJlIiwiYXZhaWxhYmxlQ29waWVzIiwiaW1hZ2VFbGVtZW50IiwiaW1hZ2UiLCJzcmMiLCJlcnJvciIsImNvbnNvbGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJmaWxlIiwidGFyZ2V0IiwiZmlsZXMiLCJzaXplIiwicmVhZGVyIiwiRmlsZVJlYWRlciIsIm9ubG9hZCIsImUiLCJyZXN1bHQiLCJyZWFkQXNEYXRhVVJMIiwicHJldmVudERlZmF1bHQiLCJmb3JtIiwiRm9ybURhdGEiLCJ0cmltIiwiaXNVbmlxdWVUaXRsZSIsImlzQ29uZmlybWVkIiwiY29uZmlybSIsIm1ldGhvZCIsImJvZHkiLCJnZXRCb29rcyIsImdldEJvb2tCeUlkIiwicmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInN0YXR1cyIsIkpTT04iLCJwYXJzZSIsInJlc3BvbnNlVGV4dCIsImRpc3BsYXlCb29rRGV0YWlscyIsInN0YXR1c1RleHQiLCJvbmVycm9yIiwic2VuZCJdLCJzb3VyY2VzIjpbInVwZGF0ZS1ib29rLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEdlbmVyYWwgZnVuY3Rpb24gdG8gY2xvc2Ugd2hpY2hldmVyIGZvcm0gaXMgb3BlblxyXG5mdW5jdGlvbiBjbG9zZUZvcm0oKSB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdC1vdmVybGF5Jykuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0Rm9ybUNvbnRhaW5lcicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbn1cclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGNoZWNrIGlmIGEgdGl0bGUgYWxyZWFkeSBleGlzdHMsIGlnbm9yaW5nIHRoZSBjdXJyZW50IGJvb2tcclxuYXN5bmMgZnVuY3Rpb24gaXNUaXRsZVVuaXF1ZShuZXdUaXRsZSwgYm9va0lkKSB7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwOi8vbG9jYWxob3N0OjU1MDAvYm9va3NgKTtcclxuICAgIGNvbnN0IGJvb2tzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG5cclxuICAgIHJldHVybiBib29rcy5ldmVyeShib29rID0+IGJvb2sudGl0bGUgIT09IG5ld1RpdGxlIHx8IGJvb2suX2lkID09PSBib29rSWQpO1xyXG59XHJcblxyXG4vLyBGdW5jdGlvbiB0byB2YWxpZGF0ZSBJU0JOXHJcbmZ1bmN0aW9uIGlzVmFsaWRJU0JOKGlzYm4pIHtcclxuICAgIC8vIFJlbW92ZSBhbnkgaHlwaGVuc1xyXG4gICAgaXNibiA9IGlzYm4ucmVwbGFjZSgvLS9nLCAnJyk7XHJcblxyXG4gICAgLy8gQ2hlY2sgaWYgdGhlIElTQk4gaXMgMTAgb3IgMTMgY2hhcmFjdGVycyBsb25nXHJcbiAgICBpZiAoaXNibi5sZW5ndGggPT09IDEwKSB7XHJcbiAgICAgICAgbGV0IHN1bSA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA5OyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGlzYm5baV0gPCAnMCcgfHwgaXNibltpXSA+ICc5JykgcmV0dXJuIGZhbHNlOyAvLyBFbnN1cmUgYWxsIGNoYXJhY3RlcnMgYXJlIGRpZ2l0c1xyXG4gICAgICAgICAgICBzdW0gKz0gKGkgKyAxKSAqIHBhcnNlSW50KGlzYm5baV0sIDEwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBjaGVja3N1bSA9IGlzYm5bOV07XHJcbiAgICAgICAgaWYgKGNoZWNrc3VtID09PSAnWCcpIHtcclxuICAgICAgICAgICAgc3VtICs9IDEwICogMTA7XHJcbiAgICAgICAgfSBlbHNlIGlmIChjaGVja3N1bSA+PSAnMCcgJiYgY2hlY2tzdW0gPD0gJzknKSB7XHJcbiAgICAgICAgICAgIHN1bSArPSAxMCAqIHBhcnNlSW50KGNoZWNrc3VtLCAxMCk7IC8vY2FsY3VsYXRlcyB0aGUgd2VpZ2h0ZWQgc3VtIGZvciBlYWNoIGRpZ2l0IGJ5IG11bHRpcGx5aW5nIHRoZSBkaWdpdCdzIHBvc2l0aW9uXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3VtICUgMTEgPT09IDA7XHJcbiAgICB9IGVsc2UgaWYgKGlzYm4ubGVuZ3RoID09PSAxMykge1xyXG4gICAgICAgIGxldCBzdW0gPSAwO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTM7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBkaWdpdCA9IHBhcnNlSW50KGlzYm5baV0sIDEwKTtcclxuICAgICAgICAgICAgaWYgKGlzTmFOKGRpZ2l0KSkgcmV0dXJuIGZhbHNlOyAvLyBFbnN1cmUgYWxsIGNoYXJhY3RlcnMgYXJlIGRpZ2l0c1xyXG4gICAgICAgICAgICBzdW0gKz0gaSAlIDIgPT09IDAgPyBkaWdpdCA6IGRpZ2l0ICogMztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN1bSAlIDEwID09PSAwO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59XHJcblxyXG4vLyBGdW5jdGlvbiB0byBvcGVuIHRoZSB1cGRhdGUgZm9ybSB3aXRoIGN1cnJlbnQgYm9vayBkZXRhaWxzXHJcbmFzeW5jIGZ1bmN0aW9uIGVkaXRCb29rKGJvb2tJZCkge1xyXG4gICAgaWYgKCFib29rSWQpIHtcclxuICAgICAgICBhbGVydCgnSW52YWxpZCBib29rIElELicpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIC8vIEZldGNoIHRoZSBib29rIGRldGFpbHMgZnJvbSB0aGUgc2VydmVyIHVzaW5nIHRoZSBib29rIElEXHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cDovL2xvY2FsaG9zdDo1NTAwL2Jvb2tzLyR7Ym9va0lkfWApO1xyXG5cclxuICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgY29uc3QgYm9vayA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNldCB0aGUgZm9ybSBmaWVsZHMgd2l0aCBjdXJyZW50IGJvb2sgZGV0YWlsc1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdFRpdGxlJykudmFsdWUgPSBib29rLnRpdGxlO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdEF1dGhvcicpLnZhbHVlID0gYm9vay5hdXRob3I7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0SXNibicpLnZhbHVlID0gYm9vay5pc2JuO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdEdlbnJlJykudmFsdWUgPSBib29rLmdlbnJlO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdENvcGllcycpLnZhbHVlID0gYm9vay5hdmFpbGFibGVDb3BpZXM7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0Qm9va0lkJykudmFsdWUgPSBib29rLl9pZDtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRJbWFnZScpLnZhbHVlID0gJyc7IC8vIFJlc2V0IGltYWdlIGlucHV0XHJcblxyXG4gICAgICAgICAgICAvLyBTZXQgdGhlIGltYWdlIHByZXZpZXcgZWxlbWVudCBpZiB0aGVyZSdzIGFuIGV4aXN0aW5nIGltYWdlXHJcbiAgICAgICAgICAgIGNvbnN0IGltYWdlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0Qm9va1ByZXZpZXdJbWFnZScpO1xyXG4gICAgICAgICAgICBpZiAoYm9vay5pbWFnZSkge1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50LnNyYyA9IGBkYXRhOmltYWdlL2pwZWc7YmFzZTY0LCR7Ym9vay5pbWFnZX1gO1xyXG4gICAgICAgICAgICAgICAgaW1hZ2VFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOyAvLyBTaG93IHRoZSBpbWFnZSBpZiBpdCBleGlzdHNcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGltYWdlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyAvLyBIaWRlIHRoZSBpbWFnZSBpZiBub3QgYXZhaWxhYmxlXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIERpc3BsYXkgdGhlIGZvcm1cclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRGb3JtQ29udGFpbmVyJykuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0LW92ZXJsYXknKS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhbGVydCgnRmFpbGVkIHRvIGZldGNoIGJvb2sgZGV0YWlscyBmb3IgZWRpdGluZy4nKTtcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIGJvb2sgZm9yIGVkaXRpbmc6JywgZXJyb3IpO1xyXG4gICAgICAgIGFsZXJ0KCdBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBmZXRjaGluZyB0aGUgYm9vayBkZXRhaWxzLicpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vLyBFdmVudCBsaXN0ZW5lciB0byBoYW5kbGUgaW1hZ2UgcHJldmlldyB3aGVuIGEgbmV3IGltYWdlIGlzIHNlbGVjdGVkXHJcbmRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0SW1hZ2UnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGNvbnN0IGZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF07XHJcbiAgICBcclxuICAgIC8vIENoZWNrIGlmIGFuIGltYWdlIGZpbGUgaXMgc2VsZWN0ZWRcclxuICAgIGlmIChmaWxlKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgZmlsZSBzaXplIGV4Y2VlZHMgMTZNQiAoMTYgKiAxMDI0ICogMTAyNCBieXRlcylcclxuICAgICAgICBpZiAoZmlsZS5zaXplID4gMTYgKiAxMDI0ICogMTAyNCkge1xyXG4gICAgICAgICAgICBhbGVydCgnSW1hZ2Ugc2l6ZSBzaG91bGQgbm90IGV4Y2VlZCAxNk1CLiBQbGVhc2Ugc2VsZWN0IGEgc21hbGxlciBmaWxlLicpO1xyXG4gICAgICAgICAgICBldmVudC50YXJnZXQudmFsdWUgPSAnJzsgLy8gQ2xlYXIgdGhlIGZpbGUgaW5wdXRcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUHJvY2VlZCB3aXRoIGRpc3BsYXlpbmcgdGhlIGltYWdlIHByZXZpZXcgaWYgdGhlIHNpemUgaXMgdmFsaWRcclxuICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xyXG4gICAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBjb25zdCBpbWFnZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdEJvb2tQcmV2aWV3SW1hZ2UnKTtcclxuICAgICAgICAgICAgaW1hZ2VFbGVtZW50LnNyYyA9IGUudGFyZ2V0LnJlc3VsdDtcclxuICAgICAgICAgICAgaW1hZ2VFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snOyAvLyBTaG93IHRoZSBwcmV2aWV3XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTtcclxuICAgIH1cclxufSk7XHJcblxyXG4vLyBGdW5jdGlvbiB0byBoYW5kbGUgdXBkYXRlIGZvcm0gc3VibWlzc2lvblxyXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZWRpdEJvb2tGb3JtJykuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgYXN5bmMgZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBQcmV2ZW50IGRlZmF1bHQgZm9ybSBzdWJtaXNzaW9uXHJcblxyXG4gICAgY29uc3QgZm9ybSA9IG5ldyBGb3JtRGF0YSh0aGlzKTtcclxuICAgIGNvbnN0IGJvb2tJZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0Qm9va0lkJykudmFsdWU7XHJcbiAgICBjb25zdCB0aXRsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlZGl0VGl0bGUnKS52YWx1ZS50cmltKCk7IFxyXG4gICAgY29uc3QgYXV0aG9yID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRBdXRob3InKS52YWx1ZS50cmltKCk7XHJcbiAgICBjb25zdCBpc2JuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2VkaXRJc2JuJykudmFsdWU7XHJcblxyXG4gICAgLy8gVGl0bGUgYW5kIEF1dGhvciBsZW5ndGggdmFsaWRhdGlvblxyXG4gICAgaWYgKHRpdGxlLmxlbmd0aCA+IDEwMCkge1xyXG4gICAgICAgIGFsZXJ0KCdUaXRsZSBtdXN0IGJlIDEwMCBjaGFyYWN0ZXJzIG9yIGZld2VyLicpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoYXV0aG9yLmxlbmd0aCA+IDE1MCkge1xyXG4gICAgICAgIGFsZXJ0KCdBdXRob3IgbmFtZSBtdXN0IGJlIDE1MCBjaGFyYWN0ZXJzIG9yIGZld2VyLicpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIWlzVmFsaWRJU0JOKGlzYm4pKSB7XHJcbiAgICAgICAgYWxlcnQoJ0ludmFsaWQgSVNCTi4gUGxlYXNlIGVudGVyIGEgdmFsaWQgSVNCTi0xMCBvciBJU0JOLTEzLicpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDaGVjayBpZiB0aXRsZSBpcyB1bmlxdWUgKGlnbm9yaW5nIHRoZSBjdXJyZW50IGJvb2sncyBvd24gdGl0bGUpXHJcbiAgICBjb25zdCBpc1VuaXF1ZVRpdGxlID0gYXdhaXQgaXNUaXRsZVVuaXF1ZSh0aXRsZSwgYm9va0lkKTtcclxuICAgIGlmICghaXNVbmlxdWVUaXRsZSkge1xyXG4gICAgICAgIGFsZXJ0KCdUaXRsZSBhbHJlYWR5IGV4aXN0cy4gUGxlYXNlIGNob29zZSBhIGRpZmZlcmVudCB0aXRsZS4nKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaXNDb25maXJtZWQgPSBjb25maXJtKFwiQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHVwZGF0ZSB0aGUgYm9vayBkZXRhaWxzP1wiKTtcclxuICAgIGlmICghaXNDb25maXJtZWQpIHtcclxuICAgICAgICByZXR1cm47IC8vIEV4aXQgZnVuY3Rpb24gaWYgdXNlciBkb2VzIG5vdCBjb25maXJtXHJcbiAgICB9XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwOi8vbG9jYWxob3N0OjU1MDAvdXBkYXRlQm9vay8ke2Jvb2tJZH1gLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICAgICAgICAgIGJvZHk6IGZvcm0sXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICBhbGVydCgnQm9vayB1cGRhdGVkIHN1Y2Nlc3NmdWxseSEnKTtcclxuICAgICAgICAgICAgY2xvc2VGb3JtKCk7IC8vIENsb3NlIHRoZSBlZGl0IGZvcm1cclxuICAgICAgICAgICAgZ2V0Qm9va3MoKTsgLy8gUmVmcmVzaCB0aGUgYm9vayBsaXN0XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYWxlcnQoJ0ZhaWxlZCB0byB1cGRhdGUgYm9vay4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nKTtcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIGJvb2s6JywgZXJyb3IpO1xyXG4gICAgICAgIGFsZXJ0KCdBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB1cGRhdGluZyB0aGUgYm9vay4gUGxlYXNlIGNoZWNrIHRoZSBjb25zb2xlIGZvciBkZXRhaWxzLicpO1xyXG4gICAgfVxyXG59KTtcclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGZldGNoIGEgYm9vayBieSBJRFxyXG5mdW5jdGlvbiBnZXRCb29rQnlJZChib29rSWQpIHtcclxuICAgIC8vIFZhbGlkYXRlIHRoZSBwcm92aWRlZCBib29rIElEXHJcbiAgICBpZiAoIWJvb2tJZCB8fCB0eXBlb2YgYm9va0lkICE9PSAnc3RyaW5nJyB8fCBib29rSWQudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgIGFsZXJ0KCdJbnZhbGlkIGJvb2sgSUQuIFBsZWFzZSBwcm92aWRlIGEgdmFsaWQgSUQuJyk7XHJcbiAgICAgICAgcmV0dXJuOyAvLyBFeGl0IGZ1bmN0aW9uIGlmIHRoZSBib29rIElEIGlzIGludmFsaWRcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICAvLyBPcGVuIGEgR0VUIHJlcXVlc3QgdG8gZmV0Y2ggYSBzcGVjaWZpYyBib29rIGJ5IGl0cyBJRCwgdXNpbmcgdGVtcGxhdGUgbGl0ZXJhbHMgaW4gdGhlIFVSTFxyXG4gICAgcmVxdWVzdC5vcGVuKCdHRVQnLCBgaHR0cDovL2xvY2FsaG9zdDo1NTAwL2Jvb2tzLyR7Ym9va0lkfWAsIHRydWUpO1xyXG5cclxuICAgIC8vIERlZmluZSB0aGUgb25sb2FkIGV2ZW50IGhhbmRsZXIgZm9yIHRoZSByZXF1ZXN0XHJcbiAgICByZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgcmVxdWVzdCB3YXMgc3VjY2Vzc2Z1bCAoc3RhdHVzIGNvZGUgYmV0d2VlbiAyMDAgYW5kIDI5OSlcclxuICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPj0gMjAwICYmIHJlcXVlc3Quc3RhdHVzIDwgMzAwKSB7XHJcbiAgICAgICAgICAgIC8vIFBhcnNlIHRoZSBKU09OIHJlc3BvbnNlIHRvIGdldCB0aGUgYm9vayBvYmplY3RcclxuICAgICAgICAgICAgY29uc3QgYm9vayA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICBkaXNwbGF5Qm9va0RldGFpbHMoYm9vayk7IC8vIENhbGwgZGlzcGxheUJvb2tEZXRhaWxzIHRvIHJlbmRlciB0aGUgYm9vayBkZXRhaWxzXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHRoZSBzdGF0dXMgaXMgNDAwLCBhbGVydCBhYm91dCBpbnZhbGlkIGJvb2sgSUQgZm9ybWF0XHJcbiAgICAgICAgZWxzZSBpZiAocmVxdWVzdC5zdGF0dXMgPT09IDQwMCkge1xyXG4gICAgICAgICAgICBhbGVydCgnSW52YWxpZCBib29rIElEIGZvcm1hdC4gUGxlYXNlIGNoZWNrIHRoZSBJRCBhbmQgdHJ5IGFnYWluLicpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdJbnZhbGlkIGJvb2sgSUQgZm9ybWF0OicsIHJlcXVlc3Quc3RhdHVzVGV4dCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHRoZSBzdGF0dXMgaXMgNDA0LCBhbGVydCB0aGF0IHRoZSBib29rIHdhcyBub3QgZm91bmRcclxuICAgICAgICBlbHNlIGlmIChyZXF1ZXN0LnN0YXR1cyA9PT0gNDA0KSB7XHJcbiAgICAgICAgICAgIGFsZXJ0KCdCb29rIG5vdCBmb3VuZC4gSXQgbWF5IGhhdmUgYmVlbiByZW1vdmVkLicpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdCb29rIG5vdCBmb3VuZDonLCByZXF1ZXN0LnN0YXR1c1RleHQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBIYW5kbGUgb3RoZXIgdW5zdWNjZXNzZnVsIHN0YXR1cyBjb2RlcyBieSBhbGVydGluZyB0aGUgdXNlclxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBhbGVydCgnRmFpbGVkIHRvIHJldHJpZXZlIGJvb2sgZGV0YWlscy4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGZldGNoIGJvb2s6JywgcmVxdWVzdC5zdGF0dXNUZXh0KTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIERlZmluZSB0aGUgb25lcnJvciBldmVudCBoYW5kbGVyIGZvciBuZXR3b3JrIGVycm9yc1xyXG4gICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIExvZyBhIG5ldHdvcmsgZXJyb3IgYW5kIGFsZXJ0IHRoZSB1c2VyXHJcbiAgICAgICAgY29uc29sZS5lcnJvcignTmV0d29yayBlcnJvciB3aGlsZSBmZXRjaGluZyBib29rJyk7XHJcbiAgICAgICAgYWxlcnQoJ0FuIGVycm9yIG9jY3VycmVkIHdoaWxlIGZldGNoaW5nIHRoZSBib29rLiBQbGVhc2UgY2hlY2sgdGhlIGNvbnNvbGUgZm9yIGRldGFpbHMuJyk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFNlbmQgdGhlIHJlcXVlc3QgdG8gdGhlIHNlcnZlclxyXG4gICAgcmVxdWVzdC5zZW5kKCk7XHJcbn0iXSwibWFwcGluZ3MiOiJnMmZBZVk7QUFBQUEsY0FBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxjQUFBLEdBZlo7QUFDQSxRQUFTLENBQUFFLFNBQVNBLENBQUEsQ0FBRyxDQUFBRixjQUFBLEdBQUFHLENBQUEsTUFBQUgsY0FBQSxHQUFBSSxDQUFBLE1BQ2pCQyxRQUFRLENBQUNDLGNBQWMsQ0FBQyxjQUFjLENBQUMsQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLENBQUcsTUFBTSxDQUFDUixjQUFBLEdBQUFJLENBQUEsTUFDL0RDLFFBQVEsQ0FBQ0MsY0FBYyxDQUFDLG1CQUFtQixDQUFDLENBQUNDLEtBQUssQ0FBQ0MsT0FBTyxDQUFHLE1BQU0sQ0FDdkUsQ0FFQTtBQUNBLGNBQWUsQ0FBQUMsYUFBYUEsQ0FBQ0MsUUFBUSxDQUFFQyxNQUFNLENBQUUsQ0FBQVgsY0FBQSxHQUFBRyxDQUFBLE1BQzNDLEtBQU0sQ0FBQVMsUUFBUSxFQUFBWixjQUFBLEdBQUFJLENBQUEsTUFBRyxLQUFNLENBQUFTLEtBQUssQ0FBQyw2QkFBNkIsQ0FBQyxFQUMzRCxLQUFNLENBQUFDLEtBQUssRUFBQWQsY0FBQSxHQUFBSSxDQUFBLE1BQUcsS0FBTSxDQUFBUSxRQUFRLENBQUNHLElBQUksQ0FBQyxDQUFDLEVBQUNmLGNBQUEsR0FBQUksQ0FBQSxNQUVwQyxNQUFPLENBQUFVLEtBQUssQ0FBQ0UsS0FBSyxDQUFDQyxJQUFJLEVBQUksQ0FBQWpCLGNBQUEsR0FBQUcsQ0FBQSxNQUFBSCxjQUFBLEdBQUFJLENBQUEsYUFBQUosY0FBQSxHQUFBa0IsQ0FBQSxTQUFBRCxJ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